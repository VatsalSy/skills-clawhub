# 稀有 / 隐藏性癖规则
# 生成器在完成「基础 3～5 + 特殊 1」性癖抽取后，按下列规则决定是否将其中 1 个基础性癖替换为同类别稀有 kink。
# 仅 A–E 五类中的 kink 可标记 rare: true；F 类不参与稀有替换。

version: "1.0"

# 触发概率：每日有该概率触发「稀有替换」（0～1，如 0.15 表示 15%）
trigger_probability: 0.15

# 替换逻辑（生成器执行顺序）：
# 1. 在已抽到的基础性癖（3～5 个，来自 A–E）中随机选一个类别；
# 2. 在该类别的 category_*.yaml 中找出所有 rare: true 的 kink_id，排除 recent_kinks 中该类别 3 天内已用的；
# 3. 若存在可选稀有 kink，则用其中随机 1 个替换步骤 1 选中的那条基础性癖（原 kink 作废，不再计入当日）；若不存在或全在 exclusion 内，则不替换，当日无稀有。
# 4. 替换后当日性癖总数仍为 4～6（基础数不变，仅其中 1 条变为稀有）；暗示策略与 guess_keywords 使用替换后的 kink。
# 5. 可选：在 roleplay-active 的「今日主题」或单独一行标注「今日含 1 个稀有性癖」，仅作 agent 提示，不泄漏具体名称或类别。
