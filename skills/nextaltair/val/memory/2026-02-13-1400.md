# Session: 2026-02-13 14:00:34 UTC

- **Session Key**: agent:main:main
- **Session ID**: aeab9ed9-ac8c-49e7-80bc-efe3fee422b4
- **Source**: webchat

## Conversation Summary

assistant: HEARTBEAT_OK
user: [Fri 2026-02-13 22:37 GMT+9] スキルとプラグインの違いって何?
assistant: [[reply_to_current]]
一言でいうと:

- **スキル** = エージェント向けの「手順書＋補助スクリプト」  
- **プラグイン** = OpenClaw本体に機能を「追加実装」する拡張

もう少しだけ:

- **スキル**
  - 主体は `SKILL.md`（どう使うかの知識）
  - 必要ならローカルの script/CLI を呼ぶ
  - 導入が軽い、作りやすい
  - 例: Notion運用フロー、画像生成手順、ログ分析手順

- **プラグイン**
  - 主体はコード実装（ツール・チャネル・機能を本体へ提供）
  - 設定・権限・ライフサイクル管理が必要
  - 強力だけど重い（設計と保守コスト高め）
  - 例: voice-call みたいな専用機能連携

判断基準はシンプルで、  
**「手順を教えたい」ならスキル、**  
**「新しい能力そのものを生やしたい」ならプラグイン。**
user: [Fri 2026-02-13 22:38 GMT+9] プラグインの作成方法をおしえて
assistant: [[reply_to_current]]
いい。最短ルートでいく。

## 0) 何を作るか決める
まず種類を決める:

- 新しいツールを生やす（`api.registerTool`）
- 新しいチャネルを生やす（`api.registerChannel`）
- CLIコマンド追加（`api.registerCli`）
- バックグラウンド常駐（`api.registerService`）

---

## 1) プラグインの雛形を作る

例: `~/.openclaw/extensions/my-plugin/`

### `openclaw.plugin.json`（必須）
```json
{
  "id": "my-plugin",
  "name": "My Plugin",
  "version": "0.1.0",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "enabledFeature": { "type": "boolean", "default": true }
    }
  }
}
```

### `index.ts`
```ts
import { Type } from "@sinclair/typebox";

export default function (api) {
  api.registerTool(
    {
      name: "my_echo",
      description: "Echo input text",
      parameters: Type.Object({
        text: Type.String(),
      }),
      async execute(_id, params) {
        return { content: [{ type: "text", text: `echo: ${params.text}` }] };
      },
    },
    { optional: true } // 安全にするならoptional推奨
  );
}
```

---

## 2) OpenClaw設定に追加

`~/.openclaw/openclaw.json` の例:

```json5
{
  plugins: {
    enabled: true,
    load: {
      paths: ["~/.openclaw/extensions/my-plugin"]
    },
    entries: {
      "my-plugin": {
        enabled: true,
        config: {
          enabledFeature: true
        }
      }
    }
  }
}
```

---

## 3) 再起動して確認

```bash
openclaw plugins list
openclaw plugins info my-plugin
openclaw plugins doctor
```

（プラグイン設定変更は再起動が必要）

---

## 4) ツールを使えるようにする（optional toolの場合）
`optional: true` にしたツールは allowlist へ追加が必要。

```json5
{
  agents: {
    list: [
      {
        id: "main",
        tools: {
          allow: ["my_echo"]
        }
      }
    ]
  }
}
```

---

ハマりどころ3つだけ覚えとけばOK:

- `openclaw.plugin.json` が無い/壊れてるとロード以前に弾かれる  
- ツール名がcoreと衝突するとスキップされる  
- `plugins.entries` のIDは manifest の `id` と一致させる

必要なら次、**お前の用途向けに1個実用プラグイン（例: ローカルAPI叩くやつ）をそのまま作る雛形**まで出す。
user: [Fri 2026-02-13 22:41 GMT+9] workspaceに"extensions" は作るわけじゃないのな
assistant: [[reply_to_current]]
作ってもいい。そこは2択。

- **グローバル**: `~/.openclaw/extensions/...`
- **workspaceローカル**: `<workspace>/.openclaw/extensions/...`  
  （今なら `~/.openclaw/workspace/val/.openclaw/extensions/...`）

つまり「workspaceに `extensions` 直下」じゃなくて、  
**`workspace/.openclaw/extensions`** が正しい置き場所。  
プロジェクト専用で閉じたいならこっちが便利。
user: [Fri 2026-02-13 22:42 GMT+9] `/.openclaw` の下である必要はあるのか
assistant: [[reply_to_current]]
必須ではない。  
`/.openclaw` 配下は**自動検出される既定パス**ってだけ。

他の場所でも、`plugins.load.paths` に明示すれば読める。  
なので運用はこう:

- 何も設定せず楽したい → `~/.openclaw/extensions` か `workspace/.openclaw/extensions`
- 任意ディレクトリで管理したい → `plugins.load.paths` に追加

つまり「そこじゃないとダメ」ではなく、「そこだと設定いらず」。
user: [Fri 2026-02-13 22:42 GMT+9] 了解
assistant: [[reply_to_current]]
いいね。  
次やるなら、最小のサンプルplugin 1個一緒に生やして動作確認まで一気にやれる。
user: [Fri 2026-02-13 22:43 GMT+9] いやいい もっとスキルとプラグインの違いを詳しく 新しい機能とは具体的にどういう処理が新しい機能だ?
assistant: [[reply_to_current]]
いい質問。ここをはっきり切ると設計ミスが減る。

## 先に結論
**「新しい機能」= OpenClaw本体の“能力面”を増やすこと。**  
手順を増やすだけならスキル、能力そのものを増設するならプラグイン。

---

## スキルがやること（機能を“使いこなす”層）
スキルは基本的に:

- 既存ツールや外部CLIをどう使うかを定義する
- 手順・運用フロー・ベストプラクティスを提供する
- 必要ならローカルscriptを実行して作業を整える

つまり、**既にあるI/Oを組み合わせるレシピ**。

例:
- 「Notion APIをこの順序で叩く」
- 「画像生成scriptをこの引数で呼ぶ」
- 「ログを検索して要約する」

---

## プラグインがやること（機能を“増設する”層）
プラグインは本体に対して:

- 新しい agent tool を登録する（LLMが直接呼べる新関数）
- 新しい channel を追加する（例: 新メッセージング基盤）
- 新しい provider auth/RPC/CLI/service を追加する
- Gateway内で常駐処理やイベント処理を持てる

つまり、**OpenClawがそもそもできなかったことをできるようにするコード拡張**。

---

## 「新しい機能」の具体例

### 1) 新しい通信面
- まだ未対応のチャットサービスに送受信対応を追加  
→ これはプラグイン（channel追加）

### 2) 新しい実行面
- 独自APIに対する専用toolを実装して、安全にschema付きで公開  
→ これはプラグイン（tool追加）

### 3) 新しい制御面
- `/mystatus` みたいなAIを通さない即応コマンドを追加  
→ これはプラグイン（command追加）

### 4) 新しい常駐処理
- 定期で外部状態を監視してGateway内で処理  
→ これはプラグイン（service追加）

---

## 境界が曖昧なケースの判断基準
この質問で決めると早い:

- **Q1:** 「OpenClawが今持ってない“入口/出口”を増やすか?」  
  - Yes → プラグイン
- **Q2:** 「既存の入口/出口で、やり方を整えるだけか?」  
  - Yes → スキル
- **Q3:** 「LLMに新しい関数として見せたいか?」  
  - Yes → プラグイン
- **Q4:** 「壊れても手順差し替えで済ませたいか?」  
  - Yes → スキル

---

## 実務の定石
- まずスキルで回す（軽い・速い・保守が楽）
- 限界が出たらプラグイン化（重いが強力）

要するに、  
**スキルはオペレーション設計、プラグインはプロダクト実装**。  
「新しい機能」とは後者のこと。
user: Conversation info (untrusted metadata):
```json
{
  "conversation_label": "heartbeat"
}
```

Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.
Current time: Friday, February 13th, 2026 — 11:00 PM (Asia/Tokyo)
assistant: HEARTBEAT_OK
