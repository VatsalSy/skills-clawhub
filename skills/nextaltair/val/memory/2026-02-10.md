# 2026-02-10

## DIY PC ingest (Notion)
- `skills/diy-pc-ingest` updated for public sharing:
  - Notion IDs/token externalized to local config + env; added `references/config.example.json`.
  - Removed embedded real Notion IDs (DEFAULT_IDS now `None`), require local config; commit `3995c6e`.
  - Added direct update controls: `page_id` (or `id`) to patch a specific Notion page, and `archive:true` to archive duplicates; commit `5263adf`.
  - PCConfig upsert key changed to composite `(Name + Purchase Date)`; commit `4e563cb`.
  - Added `mirror_to_pcconfig:true` for `target=storage` to also create/update a PCConfig row (requires `現在の接続先PC`, `購入日`, `Name`); commit `24dafa2`.

- Notion records created/updated:
  - Storage created: Samsung 970 EVO Plus 1TB (MZ-V7S1T0B/IT) on 2021-11-21.
  - Storage created: Samsung 870 QVO 4TB (MZ-77Q4T0B/IT) and vendor corrected to コジマ楽天市場店.
  - Solidigm P41 Plus (SSDPFKNU020TZX1) updated with purchase date 2024-07-25 and mirrored into PCConfig.
  - 870 QVO serial corrected to `S5STNF0T700334W`.

## VideoLibrary auto-organize cron
- Previous 04:30 cron was only for VideoLibrary folder explosion autofix; not for moving `B:\未視聴`.
- Removed the autofix job (id `762c5140-a252-476c-9ec3-e6066bb551f5`).
- Added new daily 04:30 cron job (id `647a9449-98a3-47b8-b907-2befd46499d4`) to run:
  - `python ~/.openclaw/mediaops/val/mediaops/unwatched_pipeline_runner.py --limit 500 --apply`
  - Alert only on abnormal conditions; otherwise silent.

## _collisions DB fix
- Implemented `mediaops/fix_db_paths_in_collisions.py` to merge+delete 15 DB rows pointing under `by_program\_collisions` and repoint metadata; ended with `collisions_paths_count=0`.

## Guardrail
- Added path sanity guardrails to `B:\_AI_WORK\scripts\apply_move_plan.ps1`:
  - Reject embedded drive patterns like `\B:\` and non-drive-rooted paths.

## Skill publishing
- `skills/diy-pc-ingest` prepared as standalone GitHub/ClawHub skill; SSH signing used for commits.

## Context7
- Verified `skills/context7/query.ts` works with Context7.

## LoRAIro: useful PySide6 patterns from Context7 library `/fernicar/pyside6_examples_doc_2025_v6.9.1`
(These are candidates to reuse in LoRAIro GUI/tools.)

- DocumentViewer architecture:
  - `RecentFiles` QObject persists a bounded recent-file list via `QSettings` and emits `changed` / `countChanged` signals.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/demos/documentviewer/README.md
  - `MainWindow` pattern:
    - `openFile(filePath)` slot does: save active viewer state -> choose viewer via `ViewerFactory` -> init -> restore viewer state -> set into `QScrollArea`.
    - Persists main window + viewer-specific state via `QSettings` (`readSettings`/`saveSettings` + viewerName keys).
    Source: same README.md
  - `RecentFileMenu` QMenu updates its actions from RecentFiles and emits `fileOpened(filePath)`.
    Source: same README.md

- PDF viewing:
  - `PdfViewer` uses `QPdfDocument` + `QPdfView`, exposes page thumbnails via `QListView(QPdfDocument.pageModel())` and bookmarks via `QTreeView(QPdfBookmarkModel)`.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/demos/documentviewer/README.md
  - Standalone references: `examples/pdf/quickpdfviewer` and `examples/pdfwidgets/pdfviewer`.

- Drag & drop ingestion UI:
  - `DropArea` widget (QLabel subclass) uses `setAcceptDrops(True)` and implements `dragEnterEvent/dragMoveEvent/dragLeaveEvent/dropEvent` with `QMimeData` (`hasUrls()` for file paths).
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/widgets/draganddrop/dropsite/README.md

- Settings introspection:
  - `settingseditor` example has `LocationDialog` to show where `QSettings` stores data (format/scope/org/app) and `SettingsTree` to view/edit settings with auto-refresh.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/corelib/settingseditor/README.md

- Image display/save patterns:
  - `ImageViewer` pattern: QLabel + QScrollArea + zoom toolbar.
    Source: documentviewer README
  - Screenshot example shows `QFileDialog.getSaveFileName` + `QPixmap.save` and hints `QImageWriter.supportedMimeTypes()` for filters.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/widgets/desktop/screenshot/README.md

- QML <-> Python bridge:
  - Use `rootObject().findChild(QObject, objectName)` and connect built-in QML signals (`clicked`) to Python callables/lambdas.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/qml/signals/README.md

- Graphs / visualization:
  - QML side: `QtGraphs` (`GraphsView`, `LineSeries`, `ValueAxis`) + `Connections` to QObject exposed from Python.
    Source: https://github.com/fernicar/pyside6_examples_doc_2025_v6.9.1/blob/6.9.1/examples/graphs/2d/graphsaudio/README.md
  - QtCharts patterns exist too (QChart/QChartView/QLineSeries etc.).

## Durable memory (pre-compaction flush)

- Persona: Renamed SOUL persona heading to "OpenClaw Persona (Soul in Sapphire Baseline)" (commit `927cf68`).
- Identity: Switched motif away from "network queen" wording toward "Soul in Sapphire"; IDENTITY updated (commit `9f6cb27`).
- DIY PC ingest: Added Notion ID auto-bootstrap (discover data_source_id/database_id via /v1/search when config missing) to `skills/diy-pc-ingest/scripts/notion_apply_records.js` (commit `31356a7`).
- DIY PC ingest: Added `scripts/bootstrap_config.js` (manual bootstrap) and updated README for auto-detect vs manual fallback (commit `29a98ec`).
- Created new generic Notion LTM skill named `soul-in-sapphire` (project-agnostic, unlike `lorairo-mem`). Includes scripts:
  - `bootstrap_config.py`, `ltm_write.py`, `ltm_search.py`, `ltm_common.py` and `SKILL.md`.
  - Fix: Added sys.path injection so scripts work when invoked as `python3 skills/.../script.py` (commit `c9956c5`).
  - Initial add commit `a017c8b`.
