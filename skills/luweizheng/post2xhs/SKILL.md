---
name: post-to-xhs
description: å°çº¢ä¹¦å†…å®¹å‘å¸ƒä¸ç®¡ç†åŠ©æ‰‹ã€‚å½“ç”¨æˆ·è¦æ±‚ç™»å½•ã€å‘å°çº¢ä¹¦ã€æœç´¢å°çº¢ä¹¦ã€è¯„è®ºç‚¹èµæ”¶è—ç­‰ä»»ä½•å°çº¢ä¹¦ç›¸å…³æ“ä½œæ—¶ä½¿ç”¨ã€‚
metadata: {"openclaw": {"emoji": "ğŸ“•", "requires": {"bins": ["convert"]}}}
---

# xhs-mcp-py ä½¿ç”¨æ–¹å¼

## å®‰è£…

é¦–æ¬¡ä½¿ç”¨éœ€è¦ç¡®è®¤ç¯å¢ƒä¸­æœ‰ Python è§£é‡Šå™¨ã€‚

```bash
# ä½¿ç”¨ pip å®‰è£…
pip install -U xhs-mcp-py

# å®‰è£… Playwright æµè§ˆå™¨ï¼ˆå¿…éœ€ï¼‰
playwright install chromium
```

## âš ï¸ é‡è¦ï¼šæ‰€æœ‰æ“ä½œå¿…é¡»å…ˆç™»å½•

**å°çº¢ä¹¦æ‰€æœ‰åŠŸèƒ½ï¼ˆå‘å¸ƒã€æœç´¢ã€ç‚¹èµã€è¯„è®ºç­‰ï¼‰éƒ½éœ€è¦å…ˆç™»å½•ã€‚**

### 1. æ£€æŸ¥ç™»å½•çŠ¶æ€

æ‰§è¡Œä»»ä½•æ“ä½œå‰ï¼Œå…ˆæ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼š

```bash
xhs-mcp status
```

- è¾“å‡º `âœ… å·²ç™»å½•`ï¼šå¯ä»¥ç»§ç»­æ“ä½œ
- è¾“å‡º `âŒ æœªç™»å½•`ï¼šå¿…é¡»å…ˆæ‰§è¡Œç™»å½•æ­¥éª¤

### 2. ç™»å½•æ–¹å¼ï¼ˆå¸¦ fallback é€»è¾‘ï¼‰

**æ¨èæŒ‰ä»¥ä¸‹é¡ºåºå°è¯•ç™»å½•ï¼š**

**æ–¹å¼ä¸€ï¼šç»ˆç«¯äºŒç»´ç ï¼ˆClaude Code / Open Code æ¨èï¼‰**
```bash
xhs-mcp login-qrcode --terminal
```
- âš ï¸ éœ€è¦å®‰è£… zbar åº“æ‰èƒ½è§£æäºŒç»´ç ï¼š
  - macOS: `brew install zbar`
  - Ubuntu: `apt install libzbar0`
- å¦‚æœæœªå®‰è£… zbarï¼Œä¼šè‡ªåŠ¨ä¿å­˜äºŒç»´ç å›¾ç‰‡å¹¶æç¤ºè·¯å¾„
- ç”¨æˆ·æ‰«ç åæŒ‰å›è½¦å®Œæˆç™»å½•
- å¦‚æœç»ˆç«¯æ˜¾ç¤ºå¤±è´¥ï¼Œfallback åˆ°æ–¹å¼äºŒ

**æ–¹å¼äºŒï¼šæµè§ˆå™¨æ‰«ç ç™»å½•ï¼ˆæœ‰å›¾å½¢ç•Œé¢çš„ç¯å¢ƒï¼‰**
```bash
xhs-mcp login-browser
```
- ä¼šå¼¹å‡ºæµè§ˆå™¨çª—å£ä¾›ç”¨æˆ·æ‰«ç 
- å¦‚æœæ— æ³•å¼¹å‡ºæµè§ˆå™¨ï¼ˆå¦‚è¿œç¨‹æœåŠ¡å™¨æ— å›¾å½¢ç•Œé¢ï¼‰ï¼Œä¼šæç¤ºä½¿ç”¨äºŒç»´ç æ–¹å¼

**æ–¹å¼ä¸‰ï¼šä¿å­˜äºŒç»´ç å›¾ç‰‡ï¼ˆOpenClaw æ¨èï¼‰**
```bash
xhs-mcp login-qrcode --save /tmp/qrcode.png
```
- å°†äºŒç»´ç å›¾ç‰‡å‘é€ç»™ç”¨æˆ·æ‰«ç 
- ç”¨æˆ·æ‰«ç åæŒ‰å›è½¦å®Œæˆç™»å½•

**å¦‚æœä»¥ä¸Šæ–¹å¼éƒ½å¤±è´¥ï¼š**
- æé†’ç”¨æˆ·éœ€è¦å®‰è£…æµè§ˆå™¨ç¯å¢ƒï¼ˆPlaywright + Chromiumï¼‰
- æˆ–éœ€è¦å›¾å½¢ç•Œé¢ç¯å¢ƒ

### 3. ç™»å½•å‚æ•°è¯´æ˜

`login-qrcode` å‚æ•°ï¼š

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `-s/--save` | string | âŒ | ä¿å­˜äºŒç»´ç å›¾ç‰‡åˆ°æŒ‡å®šè·¯å¾„ |
| `--terminal/--no-terminal` | flag | âŒ | æ˜¯å¦åœ¨ç»ˆç«¯æ˜¾ç¤ºäºŒç»´ç ï¼ˆé»˜è®¤ terminalï¼‰ |

ç™»å½•æˆåŠŸåï¼Œcookies ä¼šä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œåç»­æ“ä½œè‡ªåŠ¨å¤ç”¨ï¼ˆæœ‰æ•ˆæœŸçº¦ 7-30 å¤©ï¼‰ã€‚

## å‘å¸ƒæ“ä½œ

### å‘å¸ƒå›¾æ–‡å†…å®¹

å‘½ä»¤ï¼š`xhs-mcp publish`

**å‚æ•°ï¼š**ï¼ˆ`-i/--image`ã€`--tag` å¯å¤šæ¬¡æŒ‡å®šï¼‰

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `-t/--title` | string | âœ… | æ–‡å­—æ ‡é¢˜ |
| `-c/--content` | string | âœ… | æ–‡å­—æ­£æ–‡å†…å®¹ |
| `-i/--image` | string | âœ… | å›¾ç‰‡è·¯å¾„ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼‰ |
| `--tag` | string | âŒ | è¯é¢˜æ ‡ç­¾ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼‰ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp publish -t "æ ‡é¢˜" -c "æ­£æ–‡" -i /abs/1.jpg -i /abs/2.jpg --tag æ—…è¡Œ --tag ç¾é£Ÿ
```

### å‘å¸ƒè§†é¢‘å†…å®¹

å‘½ä»¤ï¼š`xhs-mcp publish-video`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `-t/--title` | string | âœ… | æ–‡å­—æ ‡é¢˜ |
| `-c/--content` | string | âœ… | æ–‡å­—æ­£æ–‡å†…å®¹ |
| `-v/--video` | string | âœ… | è§†é¢‘è·¯å¾„ |
| `--tag` | string | âŒ | è¯é¢˜æ ‡ç­¾ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼‰ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp publish-video -t "æ ‡é¢˜" -c "æ­£æ–‡" -v /abs/video.mp4
```

### å‘å¸ƒæ–‡å­—é…å›¾ï¼ˆæ–‡å­—å¡ç‰‡ï¼‰

å‘½ä»¤ï¼š`xhs-mcp publish-text-card`

**å‚æ•°ï¼š**ï¼ˆ`-p/--page`ã€`--tag` å¯å¤šæ¬¡æŒ‡å®šï¼‰

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `-c/--cover` | string | âœ… | å°é¢æ–‡å­— |
| `-p/--page` | string | âŒ | æ­£æ–‡é¡µæ–‡å­—ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼Œæœ€å¤š17é¡µï¼‰ |
| `-s/--style` | string | âŒ | å¡ç‰‡æ ·å¼ï¼šåŸºç¡€\|è¾¹æ¡†\|å¤‡å¿˜\|æ‰‹å†™\|ä¾¿ç­¾\|æ¶‚å†™\|ç®€çº¦\|å…‰å½±\|å‡ ä½• |
| `-t/--title` | string | âŒ | æ–‡å­—æ ‡é¢˜ |
| `--content` | string | âŒ | æ–‡å­—æ­£æ–‡å†…å®¹ |
| `--tag` | string | âŒ | è¯é¢˜æ ‡ç­¾ï¼ˆå¯å¤šæ¬¡æŒ‡å®šï¼‰ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp publish-text-card -c "å°é¢" -p "ç¬¬ä¸€é¡µ" -p "ç¬¬äºŒé¡µ" -s "åŸºç¡€" -t "ç¬”è®°æ ‡é¢˜"
```

## æµè§ˆ/æœç´¢

### æœç´¢å†…å®¹

å‘½ä»¤ï¼š`xhs-mcp search`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `-k/--keyword` | string | âœ… | æœç´¢å…³é”®è¯ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

**è¾“å‡ºï¼š**

å‘½ä»¤ä¼šæ‰“å°æœç´¢åˆ°çš„ç¬”è®°åˆ—è¡¨ã€‚æ¯æ¡ç»“æœä¼šåŒ…å«ï¼š

- `ID`ï¼šå¯¹åº”åç»­å‘½ä»¤é‡Œçš„ `--feed-id`
- `xsec_token`ï¼šå¯¹åº”åç»­å‘½ä»¤é‡Œçš„ `--xsec-token`

ç¤ºä¾‹ï¼ˆæˆªæ–­ï¼‰ï¼š

```text
1. æ ‡é¢˜...
   ä½œè€…: xxx | ç‚¹èµ: 123
   ID: 1234567890abcdef
   xsec_token: xsec_xxx
```

## äº’åŠ¨ï¼ˆç‚¹èµ/æ”¶è—/è¯„è®ºï¼‰

ä»¥ä¸‹å‘½ä»¤éœ€è¦ä½ å…ˆä»æœç´¢ç»“æœæˆ–ç¬”è®°é“¾æ¥ä¸­æ‹¿åˆ° `feed_id` å’Œ `xsec_token`ã€‚

### ç‚¹èµ/å–æ¶ˆç‚¹èµ

å‘½ä»¤ï¼š`xhs-mcp like`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `--feed-id` | string | âœ… | ç¬”è®° ID |
| `--xsec-token` | string | âœ… | è®¿é—®ä»¤ç‰Œ |
| `--unlike` | flag | âŒ | å–æ¶ˆç‚¹èµï¼ˆé»˜è®¤ false ä¸ºç‚¹èµï¼‰ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp like --feed-id FEED_ID --xsec-token XSEC_TOKEN
xhs-mcp like --feed-id FEED_ID --xsec-token XSEC_TOKEN --unlike
```

### æ”¶è—/å–æ¶ˆæ”¶è—

å‘½ä»¤ï¼š`xhs-mcp favorite`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `--feed-id` | string | âœ… | ç¬”è®° ID |
| `--xsec-token` | string | âœ… | è®¿é—®ä»¤ç‰Œ |
| `--unfavorite` | flag | âŒ | å–æ¶ˆæ”¶è—ï¼ˆé»˜è®¤ false ä¸ºæ”¶è—ï¼‰ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp favorite --feed-id FEED_ID --xsec-token XSEC_TOKEN
xhs-mcp favorite --feed-id FEED_ID --xsec-token XSEC_TOKEN --unfavorite
```

### å‘è¡¨è¯„è®º

å‘½ä»¤ï¼š`xhs-mcp comment`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `--feed-id` | string | âœ… | ç¬”è®° ID |
| `--xsec-token` | string | âœ… | è®¿é—®ä»¤ç‰Œ |
| `-c/--content` | string | âœ… | è¯„è®ºå†…å®¹ |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

ç¤ºä¾‹ï¼š

```bash
xhs-mcp comment --feed-id FEED_ID --xsec-token XSEC_TOKEN -c "è¯„è®ºå†…å®¹"
```

### å›å¤è¯„è®º

å‘½ä»¤ï¼š`xhs-mcp reply-comment`

**å‚æ•°ï¼š**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `--feed-id` | string | âœ… | ç¬”è®° ID |
| `--xsec-token` | string | âœ… | è®¿é—®ä»¤ç‰Œ |
| `-c/--content` | string | âœ… | å›å¤å†…å®¹ |
| `--comment-id` | string | âŒ | ç›®æ ‡è¯„è®º ID |
| `--user-id` | string | âŒ | ç›®æ ‡ç”¨æˆ· ID |
| `--headless/--no-headless` | flag | âŒ | æ˜¯å¦æ— å¤´æ¨¡å¼ï¼ˆé»˜è®¤ headlessï¼‰ |

`--comment-id` å’Œ `--user-id` è‡³å°‘éœ€è¦æä¾›ä¸€ä¸ªã€‚

ç¤ºä¾‹ï¼š

```bash
xhs-mcp reply-comment --feed-id FEED_ID --xsec-token XSEC_TOKEN -c "å›å¤å†…å®¹" --comment-id COMMENT_ID
```


## é€€å‡ºç™»å½•

å‘½ä»¤ï¼š`xhs-mcp logout`

ä¼šåˆ é™¤æœ¬åœ° cookiesã€‚

## ï¼ˆå¯é€‰ï¼‰MCP æ¨¡å¼

å¦‚æœä½ çš„è¿è¡Œç¯å¢ƒæ”¯æŒ MCPï¼ˆä¾‹å¦‚ Claude Desktop / Cursorï¼‰ï¼Œå¯ä»¥å¯åŠ¨ MCPï¼š

```bash
xhs-mcp serve
```