---
name: feishu-speaker
description: é£ä¹¦åŒå‘è¯­éŸ³æ¶ˆæ¯å·¥å…· - æ”¯æŒè¯­éŸ³è½¬æ–‡å­—æ¥æ”¶å’Œæ–‡å­—è½¬è¯­éŸ³å‘é€ï¼ˆTTS+Whisperï¼‰
version: 1.0.0
author: å·´å…‹
---

# feishu-speaker Skill v1.0

**é£ä¹¦åŒå‘è¯­éŸ³æ¶ˆæ¯å·¥å…·** - è®©AIåŠ©æ‰‹åƒçœŸäººä¸€æ ·è¯­éŸ³äº¤æµ

> âœ… **æ”¯æŒåŒå‘**ï¼šæ¥æ”¶è¯­éŸ³ï¼ˆè½¬æ–‡å­—ï¼‰+ å‘é€è¯­éŸ³ï¼ˆTTSï¼‰
> 
> âœ… **æ™ºèƒ½å›å¤**ï¼šæ ¹æ®æ¥æ”¶æ¶ˆæ¯ç±»å‹è‡ªåŠ¨é€‰æ‹©å›å¤æ–¹å¼

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### ğŸ¤ æ¥æ”¶è¯­éŸ³ï¼ˆè¯­éŸ³ â†’ æ–‡å­—ï¼‰
- ä½¿ç”¨ OpenAI Whisper æœ¬åœ°è½¬å½•
- æ”¯æŒä¸­æ–‡è¯­éŸ³è¯†åˆ«
- æ— éœ€è”ç½‘ï¼Œæœ¬åœ°å¤„ç†

### ğŸ”Š å‘é€è¯­éŸ³ï¼ˆæ–‡å­— â†’ è¯­éŸ³ï¼‰
- ä½¿ç”¨ Edge-TTS ç”Ÿæˆé«˜è´¨é‡è¯­éŸ³
- æ”¯æŒå¤šç§ä¸­æ–‡éŸ³è‰²ï¼ˆç”·/å¥³/å¹´è½»/æˆç†Ÿï¼‰
- å¯è°ƒèŠ‚è¯­é€Ÿï¼ˆ0.5x - 2.0xï¼‰

### ğŸ”„ æ™ºèƒ½äº¤äº’
- æ”¶åˆ°è¯­éŸ³æ¶ˆæ¯ â†’ è‡ªåŠ¨è½¬æ–‡å­—ç†è§£ â†’ è¯­éŸ³å›å¤
- æ”¶åˆ°æ–‡å­—æ¶ˆæ¯ â†’ æ–‡å­—ç†è§£ â†’ æ ¹æ®é…ç½®é€‰æ‹©å›å¤æ–¹å¼

---

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
# 1. å®‰è£…Whisperï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰
pip install openai-whisper

# 2. å®‰è£…Edge-TTSï¼ˆæ–‡å­—è½¬è¯­éŸ³ï¼‰
npm install -g edge-tts

# 3. å®‰è£…FFmpegï¼ˆéŸ³é¢‘æ ¼å¼è½¬æ¢ï¼‰
# macOS: brew install ffmpeg
# Ubuntu: apt-get install ffmpeg
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®é£ä¹¦APIå‡­è¯

åˆ›å»ºæ–‡ä»¶ `~/.openclaw/.credentials/feishu-app-secret.txt`ï¼š

```
ä½ çš„é£ä¹¦App Secret
```

è·å–æ–¹å¼ï¼š
1. è®¿é—® https://open.feishu.cn/app/
2. è¿›å…¥ä½ çš„åº”ç”¨ â†’ å‡­è¯ä¸åŸºç¡€ä¿¡æ¯
3. å¤åˆ¶ App Secret

### 2. æ¥æ”¶è¯­éŸ³ï¼ˆè‡ªåŠ¨è½¬æ–‡å­—ï¼‰

```bash
# è½¬å½•æ”¶åˆ°çš„è¯­éŸ³æ¶ˆæ¯
feishu-speaker listen voice.ogg

# ä½¿ç”¨æ›´å¤§çš„æ¨¡å‹ï¼ˆæ›´å‡†ç¡®ä½†æ›´æ…¢ï¼‰
feishu-speaker listen voice.ogg --model small
```

### 3. å‘é€è¯­éŸ³æ¶ˆæ¯

```bash
# åŸºæœ¬ä½¿ç”¨
feishu-speaker say "ä½ å¥½ï¼Œè¿™æ˜¯è¯­éŸ³æ¶ˆæ¯"

# æŒ‡å®šéŸ³è‰²
feishu-speaker say "æ™šä¸Šå¥½" --voice zh-CN-YunxiNeural

# è°ƒæ•´è¯­é€Ÿ
feishu-speaker say "åŠ å¿«é€Ÿåº¦" --rate "+30%"
```

### 4. æ™ºèƒ½å›å¤

```bash
# æ ¹æ®æ”¶åˆ°çš„æ¶ˆæ¯ç±»å‹è‡ªåŠ¨é€‰æ‹©å›å¤æ–¹å¼
feishu-speaker reply "æ”¶åˆ°ï¼Œæˆ‘é©¬ä¸Šå¤„ç†"
```

---

## ğŸ¨ æ”¯æŒçš„éŸ³è‰²

| éŸ³è‰²ID | æ€§åˆ« | é£æ ¼ | æ¨èåœºæ™¯ |
|:---|:---:|:---|:---|
| `zh-CN-YunxiNeural` | ç”· | å¹´è½»ã€å¹²è„†åˆ©è½ â­ | æ—¥å¸¸äº¤æµã€å¿«é€Ÿå›å¤ |
| `zh-CN-YunjianNeural` | ç”· | æˆç†Ÿç¨³é‡ | æ­£å¼åœºåˆã€å•†åŠ¡æ²Ÿé€š |
| `zh-CN-XiaoxiaoNeural` | å¥³ | æ ‡å‡†å¥³å£° | æ¸©å’Œå›å¤ã€å®¢æœåœºæ™¯ |
| `zh-CN-XiaoyiNeural` | å¥³ | æ¸©æŸ”å¥³å£° | äº²åˆ‡äº¤æµã€æƒ…æ„Ÿåœºæ™¯ |

---

## ğŸ”§ å‘½ä»¤è¯¦è§£

### `feishu-speaker listen` - è¯­éŸ³è½¬æ–‡å­—

```bash
feishu-speaker listen <éŸ³é¢‘æ–‡ä»¶> [é€‰é¡¹]

é€‰é¡¹:
  -m, --model <æ¨¡å‹>    Whisperæ¨¡å‹ï¼ˆtiny/base/smallï¼Œé»˜è®¤ï¼šbaseï¼‰
  -l, --language <è¯­è¨€> æŒ‡å®šè¯­è¨€ï¼ˆé»˜è®¤ï¼šzhï¼‰
  -o, --output <æ–‡ä»¶>   è¾“å‡ºåˆ°æ–‡ä»¶

ç¤ºä¾‹:
  feishu-speaker listen message.ogg
  feishu-speaker listen voice.mp3 --model small
```

### `feishu-speaker say` - æ–‡å­—è½¬è¯­éŸ³å¹¶å‘é€

```bash
feishu-speaker say <æ–‡å­—å†…å®¹> [é€‰é¡¹]

é€‰é¡¹:
  -v, --voice <éŸ³è‰²>    æŒ‡å®šéŸ³è‰²ï¼ˆé»˜è®¤ï¼šzh-CN-YunxiNeuralï¼‰
  -r, --rate <é€Ÿç‡>     è¯­é€Ÿè°ƒæ•´ï¼ˆé»˜è®¤ï¼š+20%ï¼‰
  -t, --to <ç”¨æˆ·ID>     æŒ‡å®šæ¥æ”¶è€…
  -s, --save <æ–‡ä»¶>     ä¿å­˜éŸ³é¢‘æ–‡ä»¶ï¼ˆä¸å‘é€ï¼‰

ç¤ºä¾‹:
  feishu-speaker say "ä½ å¥½"
  feishu-speaker say "ä¼šè®®å¼€å§‹" --voice zh-CN-YunjianNeural
  feishu-speaker say "å¿«é€Ÿæ’­æŠ¥" --rate "+50%"
```

### `feishu-speaker reply` - æ™ºèƒ½å›å¤

```bash
feishu-speaker reply <æ–‡å­—å†…å®¹> [é€‰é¡¹]

é€‰é¡¹:
  --voice               å¼ºåˆ¶è¯­éŸ³å›å¤
  --text                å¼ºåˆ¶æ–‡å­—å›å¤
  --auto                æ ¹æ®å¯¹æ–¹æ¶ˆæ¯ç±»å‹è‡ªåŠ¨é€‰æ‹©ï¼ˆé»˜è®¤ï¼‰

ç¤ºä¾‹:
  feishu-speaker reply "æ”¶åˆ°"
  feishu-speaker reply "å¥½çš„" --voice
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

é…ç½®æ–‡ä»¶ï¼š`~/.openclaw/skills/feishu-speaker/config/config.json`

```json
{
  "default_voice": "zh-CN-YunxiNeural",
  "default_rate": "+20%",
  "default_volume": "+0%",
  "default_pitch": "default",
  "reply_mode": "auto",
  "app_id": "cli_a9037acd2ba19bb5",
  "receiver_id": "ou_94f3936f1896b5378404f377da3fae6f"
}
```

é…ç½®è¯´æ˜ï¼š
- `default_voice`: é»˜è®¤TTSéŸ³è‰²
- `default_rate`: é»˜è®¤è¯­é€Ÿï¼ˆ+20% = 1.2å€é€Ÿï¼‰
- `reply_mode`: å›å¤æ¨¡å¼
  - `auto`: è‡ªåŠ¨åŒ¹é…ï¼ˆè¯­éŸ³â†’è¯­éŸ³ï¼Œæ–‡å­—â†’æ–‡å­—ï¼‰
  - `voice`: æ€»æ˜¯è¯­éŸ³å›å¤
  - `text`: æ€»æ˜¯æ–‡å­—å›å¤

---

## ğŸ“ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šAIåŠ©æ‰‹è¯­éŸ³äº¤äº’

```bash
# ç”¨æˆ·å‘é€è¯­éŸ³ â†’ AIè½¬å½•ç†è§£ â†’ è¯­éŸ³å›å¤
# è‡ªåŠ¨æµç¨‹ï¼š
# 1. ç”¨æˆ·ï¼šå‘é€è¯­éŸ³"å¸®æˆ‘æŸ¥ä¸€ä¸‹æ˜å¤©çš„å¤©æ°”"
# 2. AIï¼šfeishu-speaker listen voice.ogg â†’ è½¬å½•ä¸ºæ–‡å­—
# 3. AIï¼šå¤„ç†è¯·æ±‚ â†’ feishu-speaker reply "æ˜å¤©åŒ—äº¬æ™´å¤©ï¼Œ25åº¦"
```

### åœºæ™¯2ï¼šå®šæ—¶è¯­éŸ³æ’­æŠ¥

```bash
# åœ¨cronä»»åŠ¡ä¸­ä½¿ç”¨
feishu-speaker say "æ—©ä¸Šå¥½ï¼ä»Šæ—¥çƒ­ç‚¹å·²æ›´æ–°ï¼Œè¯·æŸ¥çœ‹ã€‚"
```

### åœºæ™¯3ï¼šå¤šéŸ³è‰²åˆ‡æ¢

```bash
# æ­£å¼åœºåˆ
feishu-speaker say "ä¼šè®®å°†åœ¨10åˆ†é’Ÿåå¼€å§‹ã€‚" --voice zh-CN-YunjianNeural

# æ´»æ³¼åœºåˆ  
feishu-speaker say "å¥½æ¶ˆæ¯ï¼ä»»åŠ¡æå‰å®Œæˆäº†ï¼" --voice zh-CN-YunxiNeural --rate "+30%"
```

---

## ğŸ”Œ æŠ€æœ¯æ¶æ„

```
æ¥æ”¶è¯­éŸ³æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é£ä¹¦è¯­éŸ³æ¶ˆæ¯  â”‚ â”€â”€â†’ â”‚  Whisper    â”‚ â”€â”€â†’ â”‚   æ–‡å­—ç»“æœ   â”‚
â”‚  (oggæ ¼å¼)   â”‚     â”‚  (æœ¬åœ°è½¬å½•)  â”‚     â”‚  (ä¸­æ–‡æ–‡æœ¬)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‘é€è¯­éŸ³æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ–‡å­—è¾“å…¥   â”‚ â”€â”€â†’ â”‚  Edge-TTS   â”‚ â”€â”€â†’ â”‚   FFmpeg    â”‚ â”€â”€â†’ â”‚  é£ä¹¦API    â”‚
â”‚  (ä¸­æ–‡æ–‡æœ¬)  â”‚     â”‚  (ç”ŸæˆMP3)  â”‚     â”‚ (è½¬opus/ogg)â”‚     â”‚ (å‘é€è¯­éŸ³)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éŸ³é¢‘æ ¼å¼**ï¼šé£ä¹¦è¯­éŸ³æ¶ˆæ¯æ”¯æŒ opus/ogg æ ¼å¼ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨è½¬æ¢
2. **æ–‡ä»¶å¤§å°**ï¼šå•æ¡è¯­éŸ³å»ºè®®ä¸è¶…è¿‡ 10MB
3. **è¯­é€ŸèŒƒå›´**ï¼šæ”¯æŒ -50% åˆ° +100%ï¼Œå»ºè®® +20% å·¦å³æœ€è‡ªç„¶
4. **ç½‘ç»œè¦æ±‚**ï¼šå‘é€è¯­éŸ³éœ€è¦è®¿é—®é£ä¹¦APIï¼ˆå›½å†…ç½‘ç»œå³å¯ï¼‰
5. **éšç§å®‰å…¨**ï¼šè¯­éŸ³è½¬æ–‡å­—åœ¨æœ¬åœ°å¤„ç†ï¼Œä¸ä¸Šä¼ åˆ°äº‘ç«¯

---

## ğŸ› æ•…éšœæ’æŸ¥

### Whisperæ¨¡å‹ä¸‹è½½å¤±è´¥

```bash
# æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
python3 -c "import whisper; whisper.load_model('base')"
```

### é£ä¹¦APIè¿”å›é”™è¯¯

1. æ£€æŸ¥ App Secret æ˜¯å¦æ­£ç¡®é…ç½®
2. æ£€æŸ¥æ¥æ”¶è€…IDæ ¼å¼ï¼ˆåº”ä»¥ `ou_` å¼€å¤´ï¼‰
3. æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ ¼å¼æ˜¯å¦ä¸º opus/ogg

### Edge-TTSå®‰è£…å¤±è´¥

```bash
# ä½¿ç”¨npxç›´æ¥è¿è¡Œ
npx edge-tts "æµ‹è¯•" --voice zh-CN-YunxiNeural --write-media output.mp3
```

---

## ğŸ“Š ä¸å…¶ä»–skillå¯¹æ¯”

| åŠŸèƒ½ | feishu-voice | feishu-speaker (æœ¬skill) |
|:---|:---:|:---:|
| å‘é€è¯­éŸ³ | âœ… | âœ… |
| æ¥æ”¶è¯­éŸ³ï¼ˆè½¬æ–‡å­—ï¼‰ | âŒ | âœ… |
| åŒå‘äº¤äº’ | âŒ | âœ… |
| æ™ºèƒ½å›å¤æ¨¡å¼ | âŒ | âœ… |
| å¤šéŸ³è‰²æ”¯æŒ | âœ… | âœ… |
| è¯­é€Ÿè°ƒèŠ‚ | âœ… | âœ… |

---

## ğŸ”„ æ›´æ–°è®¡åˆ’

### v1.1.0 (è®¡åˆ’ä¸­)
- [ ] æ”¯æŒæ›´å¤šè¯­éŸ³åˆæˆå¼•æ“ï¼ˆAzureã€ç§‘å¤§è®¯é£ï¼‰
- [ ] æ”¯æŒè¯­éŸ³æƒ…æ„Ÿè°ƒèŠ‚ï¼ˆå¼€å¿ƒã€ä¸¥è‚ƒã€æ¸©æŸ”ï¼‰
- [ ] æ”¯æŒå®æ—¶è¯­éŸ³å¯¹è¯ï¼ˆWebSocketï¼‰

### v1.2.0 (è®¡åˆ’ä¸­)
- [ ] æ”¯æŒè¯­éŸ³å…‹éš†ï¼ˆè‡ªå®šä¹‰éŸ³è‰²ï¼‰
- [ ] æ”¯æŒè¯­éŸ³è½¬å†™åè‡ªåŠ¨æ‘˜è¦
- [ ] æ”¯æŒæ‰¹é‡è¯­éŸ³å¤„ç†

---

## ğŸ“„ License

MIT License

---

**è®©é£ä¹¦æ²Ÿé€šæ›´è‡ªç„¶ï¼ŒåƒçœŸäººä¸€æ ·è¯­éŸ³äº¤æµï¼** ğŸ™ï¸âœ¨
