---
name: xhs-skill
description: å°çº¢ä¹¦ï¼ˆåˆ›ä½œè€…ä¸­å¿ƒï¼‰ç™»å½•æ‹¿ cookiesã€å‘å¸ƒç¬”è®°ã€å¯¼å‡ºæ•°æ®çš„å•ä¸€å…¥å£æŠ€èƒ½ï¼ˆæµè§ˆå™¨äº¤äº’å§”æ‰˜ agent-browser-stealthï¼‰
metadata: {"openclaw":{"emoji":"ğŸ“Œ","stage":"workflow"}}
---

æœ¬æŠ€èƒ½æ˜¯ `xhs-*` çš„åˆå¹¶ç‰ˆï¼Œç›®æ ‡æ˜¯è®©ç”¨æˆ·åªéœ€è¦ `clawhub install xhs-skill` ä¸€æ¬¡å³å¯å¼€å§‹ä½¿ç”¨ã€‚

çº¦æŸï¼š

- æ‰€æœ‰æµè§ˆå™¨äº¤äº’ï¼ˆæ‰“å¼€é¡µé¢/ç‚¹å‡»/è¾“å…¥/ä¸Šä¼ /æˆªå›¾/ç™»å½•/å¯¼å‡ºï¼‰å…¨éƒ¨å§”æ‰˜ `agent-browser-stealth`ã€‚
- ç¦æ­¢åœ¨æœ¬ä»“åº“ç¼–å†™/ç»´æŠ¤å‘å¸ƒç¼–æ’è„šæœ¬ï¼ˆå¦‚ `publish_from_payload`ï¼‰ï¼›å‘å¸ƒåŠ¨ä½œå¿…é¡»åœ¨ä¼šè¯ä¸­ç”± `agent-browser-stealth` æ‰§è¡Œã€‚
- ç¦æ­¢ä½¿ç”¨ `agent-browser`ï¼ˆæ—§é€šé“ç¦ç”¨ï¼Œç»Ÿä¸€ä½¿ç”¨ `agent-browser-stealth`ï¼‰ã€‚
- æ‰€æœ‰æ•æ„Ÿæ•°æ®ï¼ˆcookiesã€å¯¼å‡ºæ–‡ä»¶ã€æˆªå›¾ï¼‰åªè½åœ°åœ¨æœ¬æœº `data/` ç›®å½•ï¼Œä¸è¦ç²˜è´´åˆ°èŠå¤©é‡Œã€‚

æ‰§è¡Œç¡¬çº¦æŸï¼ˆç¨³å®šæ€§ï¼‰ï¼š

- åŒä¸€ `agent-browser-stealth` session ç¦æ­¢å¹¶å‘æ“ä½œï¼ˆä¸²è¡Œæ‰§è¡Œï¼‰ï¼Œå¦åˆ™å®¹æ˜“è§¦å‘ `os error 35` å‡å¤±è´¥ã€‚
- `snapshot` çš„ ref ä¼šæ¼‚ç§»ï¼šå…³é”®åŠ¨ä½œå‰åå¿…é¡»é‡æŠ“ `snapshot -i`ï¼Œå¹¶ç”¨ `placeholder/role/text` åšäºŒæ¬¡å®šä½å…œåº•ã€‚
- æ‰«ç ä¸ç­‰äºç™»å½•æˆåŠŸï¼›å¿…é¡»åšåéªŒæ ¡éªŒï¼ˆè§ä¸‹æ–¹ A èŠ‚â€œç™»å½•æˆåŠŸåˆ¤å®šâ€ï¼‰ã€‚

## å®‰è£…

```bash
clawhub install xhs-skill
cd skills/xhs-skill
npm i
```

è¯´æ˜ï¼š`npm i` ä»…ç”¨äºæœ¬æŠ€èƒ½è‡ªå¸¦çš„æœ¬åœ° CLIï¼ˆäºŒç»´ç è§£ç ã€cookies å·¥å…·ï¼‰ã€‚å¦‚æœä½ ä¸éœ€è¦è§£ç äºŒç»´ç /è½¬æ¢ cookiesï¼Œä¹Ÿå¯ä»¥åªç”¨ `agent-browser-stealth` å®Œæˆæ‰«ç ä¸å¯¼å‡ºã€‚

## ç›®å½•çº¦å®šï¼ˆæœ¬æœºï¼‰

å»ºè®®åœ¨ä½ è¿è¡Œå‘½ä»¤çš„å·¥ä½œç›®å½•ä¸‹å‡†å¤‡ï¼š

- `data/xhs_login_qr.png`ï¼šç™»å½•é¡µäºŒç»´ç æˆªå›¾ï¼ˆPNGï¼‰
- `data/raw_cookies.json`ï¼šå¯¼å‡ºçš„åŸå§‹ cookiesï¼ˆJSONï¼‰
- `data/xhs_cookies.json`ï¼šå½’ä¸€åŒ–åçš„ cookiesï¼ˆJSONï¼‰
- `data/exports/<YYYY-MM-DD>/`ï¼šå¯¼å‡ºæ•°æ®ï¼ˆCSV/XLSX/æˆªå›¾ï¼‰
- `data/assets/<YYYY-MM-DD>/`ï¼šå‘å¸ƒç¬”è®°ç”¨çš„å›¾æ ‡/é…å›¾ç´ æä¸æ¥æºè®°å½•

```bash
mkdir -p data
```

## A. ç™»å½•ï¼ˆæ‰«ç ï¼‰å¹¶ä¿å­˜ cookies

ç›®æ ‡ï¼šç™»å½•å°çº¢ä¹¦åˆ›ä½œè€…ä¸­å¿ƒå¹¶å¯¼å‡º cookiesï¼Œé¿å…é¢‘ç¹é‡å¤ç™»å½•ã€‚

1. ç”¨ `agent-browser-stealth` æ‰“å¼€ç™»å½•é¡µï¼š

- `https://creator.xiaohongshu.com/login`
- è‹¥é»˜è®¤å±•ç¤ºã€Œæ‰‹æœºå·/éªŒè¯ç ç™»å½•ã€ï¼Œç‚¹å‡»ã€Œæ‰«ç ã€åˆ‡æ¢åˆ°äºŒç»´ç è§†å›¾

2. è®© `agent-browser-stealth` æˆªå›¾ä¿å­˜äºŒç»´ç ï¼ˆPNGï¼‰åˆ° `data/xhs_login_qr.png`

3. ï¼ˆå¯é€‰ï¼‰ç”¨æœ¬åœ° CLI è§£ç äºŒç»´ç æ–‡æœ¬å¹¶æ‰“å° ASCII äºŒç»´ç ï¼š

```bash
node ./bin/xhs-skill.mjs qr show --in ./data/xhs_login_qr.png
```

OpenClaw å›ä¼ è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰ï¼š

- ç¦æ­¢åªå›ä¼ æ–‡ä»¶è·¯å¾„ï¼ˆä¾‹å¦‚ä»…è¯´ `data/xhs_login_qr.png`ï¼‰ã€‚
- å¿…é¡»å…ˆæ‰§è¡Œ `node ./bin/xhs-skill.mjs qr show --in ./data/xhs_login_qr.png`ï¼Œç„¶åæŠŠè¾“å‡ºçš„äºŒç»´ç æ–‡æœ¬ + ASCII äºŒç»´ç ç›´æ¥å‘ç»™ç”¨æˆ·ã€‚
- è‹¥ä¼šè¯æ”¯æŒå›¾ç‰‡æ¸²æŸ“ï¼Œå†é™„ä¸ŠäºŒç»´ç æˆªå›¾ç»å¯¹è·¯å¾„ï¼ˆæˆ–å›¾ç‰‡é™„ä»¶ï¼‰ä½œä¸ºè¡¥å……ã€‚
- å‘å®ŒäºŒç»´ç åå¿…é¡»æš‚åœï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤â€œå·²æ‰«ç â€å†ç»§ç»­ cookies å¯¼å‡ºã€‚

æ¨èå›ä¼ æ¨¡æ¿ï¼š

```text
è¯·ç”¨å°çº¢ä¹¦ App æ‰«è¿™ä¸ªäºŒç»´ç ç™»å½•ã€‚
äºŒç»´ç æ–‡æœ¬: <qr_text>
<ASCII QR>
```

4. ç”¨å°çº¢ä¹¦ App æ‰«ç å®Œæˆç™»å½•åï¼Œå¯¼å‡º cookies åˆ° `data/raw_cookies.json`ï¼ˆä¸èµ° DevToolsï¼‰ï¼š

```bash
agent-browser-stealth cookies --json > ./data/raw_cookies.json
```

5. å½’ä¸€åŒ– cookies å¹¶ä¿å­˜åˆ° `data/xhs_cookies.json`ï¼š

```bash
node ./bin/xhs-skill.mjs cookies normalize --in ./data/raw_cookies.json --out ./data/xhs_cookies.json
node ./bin/xhs-skill.mjs cookies status --in ./data/xhs_cookies.json
```

5.1 æ¨èç”¨è„šæœ¬åšåéªŒæ ¡éªŒï¼ˆå¯æ‰§è¡Œé—¨ç¦ï¼‰ï¼š

```bash
# ä¾‹ï¼šå…ˆè®© agent-browser-stealth è®°å½•å½“å‰ URL ä¸åå°æ¢æµ‹åçš„ URL
CURRENT_URL="$(agent-browser-stealth get url)"
agent-browser-stealth open https://creator.xiaohongshu.com/creator/home
PROBE_FINAL_URL="$(agent-browser-stealth get url)"

node ./scripts/verify_login.mjs \
  --cookies ./data/xhs_cookies.json \
  --current-url "$CURRENT_URL" \
  --probe-final-url "$PROBE_FINAL_URL" \
  --json
```

ç™»å½•æˆåŠŸåˆ¤å®šï¼ˆå¼ºåˆ¶ï¼‰ï¼š

- å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹ 2 æ¡æ‰å¯å›æŠ¥â€œç™»å½•å®Œæˆâ€ï¼ˆ`web_session` ä¸å†ä½œä¸ºç¡¬ä¾èµ–ï¼‰ï¼š
- å½“å‰ URL å·²ç¦»å¼€ `/login`
- å¯è®¿é—®åˆ›ä½œè€…åå°é¡µé¢ï¼Œä¸”ä¸ä¼š 401/å›è·³ç™»å½•
- åŠ åˆ†é¡¹ï¼šcookies ä¸­å­˜åœ¨â€œsession-like cookieâ€ï¼ˆä¾‹å¦‚ `web_session`ï¼Œæˆ– cookie åå« `session`ï¼‰ã€‚æ²¡æœ‰ä¹Ÿå¯èƒ½å¯ç”¨ï¼Œä½†ç¨³å®šæ€§æ›´å·®ã€‚
- ä»»ä¸€å¼ºåˆ¶æ¡ä»¶ä¸æ»¡è¶³ï¼Œå¿…é¡»å›æŠ¥â€œç™»å½•å¤±è´¥/æœªå®Œæˆâ€ï¼Œå¹¶é‡è¯•ç™»å½•æµç¨‹ï¼›ç¦æ­¢è¯¯æŠ¥æˆåŠŸã€‚

ç™»å½•ç»“æœè¾“å‡ºå¥‘çº¦ï¼ˆJSONï¼‰ï¼š

```json
{
  "task": "xhs_login",
  "ok": true,
  "checks": {
    "left_login": true,
    "backend_not_rejected": true,
    "has_session_like_cookie": true
  },
  "artifacts": {
    "qr_png": "data/xhs_login_qr.png",
    "raw_cookies": "data/raw_cookies.json",
    "normalized_cookies": "data/xhs_cookies.json"
  }
}
```

å¤±è´¥æ—¶ `ok=false`ï¼Œå¹¶ç»™å‡ºå¤±è´¥é¡¹ï¼ˆä¾‹å¦‚ä»åœ¨ `/login`ã€æˆ– probe å›è·³ï¼‰ï¼Œç¦æ­¢è¾“å‡ºâ€œå·²å®Œæˆâ€ã€‚

6. ï¼ˆå¯é€‰ï¼‰ç”Ÿæˆ `Cookie:` headerï¼š

```bash
node ./bin/xhs-skill.mjs cookies to-header --in ./data/xhs_cookies.json
```

å¤±è´¥å›é€€ï¼š

- äºŒç»´ç è§£ç å¤±è´¥ï¼šé€šå¸¸æ˜¯æ²¡æœ‰åˆ‡åˆ°æ‰«ç è§†å›¾æˆ–äºŒç»´ç å¤ªå°ï¼Œè®© `agent-browser-stealth` æ”¾å¤§åé‡æ–°æˆªå›¾ï¼ˆä»ä¸º PNGï¼‰ã€‚
- cookies å½’ä¸€åŒ–å¤±è´¥ï¼šä¿ç•™åŸå§‹ `data/raw_cookies.json`ï¼Œåç»­å†æ‰©å±•å…¼å®¹åˆ†æ”¯ã€‚

## A1. é˜²å°/é™æµè¿è¡Œè§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

æ ¸å¿ƒç»“è®ºï¼šå°çº¢ä¹¦é£æ§ä¸»è¦çœ‹â€œèŠ‚å¥ + æŒ‡çº¹ + è¡Œä¸º + IP + è´¦å·æƒé‡â€ã€‚å·¥å…·æœ¬èº«ä¸æ˜¯ä¸»å› ï¼Œä½¿ç”¨æ–¹å¼æ‰æ˜¯ä¸»å› ã€‚

å¼ºåˆ¶ç­–ç•¥ï¼š

1. çœŸäººèŠ‚å¥ï¼š
- ç¦æ­¢è¿ç»­æ— åœé¡¿ç‚¹å‡»/å¡«å†™ï¼›å…³é”®åŠ¨ä½œä¹‹é—´å¿…é¡»éšæœºåœé¡¿ï¼ˆå»ºè®® `1.2s~7s`ï¼‰ã€‚
- è¾“å…¥ä¼˜å…ˆ `type --delay`ï¼ˆé€å­—ï¼‰ï¼Œé¿å…å…¨é‡ç¬æ—¶ `fill`ã€‚

2. å›ºå®šæŒ‡çº¹ï¼š
- è¿è¡Œå‘å¸ƒæµç¨‹æ—¶ä¼˜å…ˆå›ºå®š `--profile`ï¼Œå¹¶å¯ç”¨ `--headed`ã€‚
- æ¨èåŒä¸€è´¦å·é•¿æœŸå¤ç”¨åŒä¸€ä¸ª profile ç›®å½•ï¼Œä¸è¦æ¯æ¬¡æ–°å»ºä¸´æ—¶ç¯å¢ƒã€‚

3. å‘å¸ƒé¢‘ç‡é—¨ç¦ï¼š
- åŒä¸€ profile é»˜è®¤ `24h <= 3` ç¯‡ã€‚
- ä¸¤æ¬¡å‘å¸ƒæœ€å°é—´éš”é»˜è®¤ `30` åˆ†é’Ÿã€‚
- å‘½ä¸­é—¨ç¦å¿…é¡»ä¸­æ­¢ï¼Œä¸å…è®¸å¼ºå‘ã€‚

4. å‘å¸ƒå‰é¢„çƒ­è¡Œä¸ºï¼š
- å…ˆåšä¸€æ¬¡çŸ­æ—¶æ­£å¸¸æµè§ˆï¼ˆé¦–é¡µ/åˆ›ä½œè€…åå°åœç•™ + æ»šåŠ¨ï¼‰ï¼Œå†è¿›å…¥å‘å¸ƒé¡µã€‚
- ç¦æ­¢â€œæ‰“å¼€é¡µé¢åç«‹åˆ»æäº¤â€ã€‚

5. ç½‘ç»œä¸è®¾å¤‡ï¼š
- ç¦æ­¢æœºæˆ¿ IP / é«˜é¢‘åˆ‡æ¢ä»£ç†ã€‚
- ä¼˜å…ˆå®¶åº­ç½‘ç»œæˆ–æ‰‹æœºçƒ­ç‚¹ï¼›åŒè´¦å·å°½é‡ä¿æŒè®¾å¤‡/IP ç¨³å®šã€‚

6. è¢«é™æµåçš„å¤„ç†ï¼š
- é™æµï¼šåœè‡ªåŠ¨åŒ–ï¼Œå›å½’æ‰‹åŠ¨æ­£å¸¸ä½¿ç”¨ `3~7` å¤©ã€‚
- å°å·ï¼šä»…èƒ½ç”³è¯‰ï¼›æ¢å·æ—¶è¦åŒæ—¶æ›´æ¢ `profile + IP + è®¾å¤‡ç¯å¢ƒ`ã€‚

## B. å‘å¸ƒç¬”è®°ï¼ˆå›¾æ–‡/è§†é¢‘ï¼‰

è¾“å…¥ï¼ˆç”¨æˆ·æä¾›ï¼‰ï¼š

- ç¬”è®°ç±»å‹ï¼šå›¾æ–‡ æˆ– è§†é¢‘
- æ ‡é¢˜ã€æ­£æ–‡ã€æ ‡ç­¾ï¼ˆå¿…å¡«ï¼‰
- è¯é¢˜ï¼ˆå¿…å¡«ï¼›åšçƒ­ç‚¹å‘å¸ƒæ—¶å¿…é¡»æ˜¯â€œä»Šå¤©çƒ­ç‚¹â€ï¼‰
- å›¾ç‰‡/è§†é¢‘è·¯å¾„ï¼ˆæœ¬æœºç»å¯¹è·¯å¾„ä¼˜å…ˆï¼‰
- å›¾æ ‡/é…å›¾éœ€æ±‚ï¼ˆå¯é€‰ï¼‰ï¼šå…³é”®è¯ã€é£æ ¼ï¼ˆæ‰å¹³/æ‹Ÿç‰©/çº¿æ€§ï¼‰ã€ä¸»è‰²ã€æ˜¯å¦é€æ˜èƒŒæ™¯
- çƒ­ç‚¹æ¥æºï¼ˆå¿…å¡«ï¼‰ï¼šæ¥æºåã€æ¥æº URLã€æ¥æºæ—¥æœŸï¼ˆ`YYYY-MM-DD`ï¼‰

å‘å¸ƒç¡¬é—¨ç¦ï¼ˆå¼ºåˆ¶ï¼‰ï¼š

1. å…ˆæŠŠå‘å¸ƒç´ ææ•´ç†ä¸º `data/publish_payload.json`ï¼ˆç¤ºä¾‹ï¼‰ï¼š

```json
{
  "topic": "ä»Šæ—¥çƒ­ç‚¹ï¼šxxxx",
  "source": {
    "name": "å¤®è§†æ–°é—»",
    "url": "https://example.com/news",
    "date": "2026-02-12",
    "evidence_snippet": "2æœˆ12æ—¥è¯¥åª’ä½“æŠ¥é“æåˆ°ï¼š......",
    "key_facts": ["å…³é”®äº‹å®1ï¼ˆå«æ—¥æœŸ/æ•°å­—ï¼‰", "å…³é”®äº‹å®2ï¼ˆå«æ—¥æœŸ/æ•°å­—ï¼‰"]
  },
  "post": {
    "title": "20å­—å†…æ ‡é¢˜ç¤ºä¾‹",
    "body": "ä¸å°‘äº 80 å­—çš„æ­£æ–‡......",
    "tags": ["#çƒ­ç‚¹", "#ä»Šæ—¥æ–°é—»", "#å°çº¢ä¹¦è¿è¥"],
    "real_topics": ["#äººå·¥æ™ºèƒ½", "#AIèµ„è®¯", "#ç§‘æŠ€è§‚å¯Ÿ"],
    "media": ["/abs/path/cover.png", "/abs/path/card_1.png"]
  }
}
```

2. å‘å¸ƒå‰å¿…é¡»æ‰§è¡Œæ ¡éªŒè„šæœ¬ï¼š

```bash
# æ™®é€šæ¨¡å¼
node ./scripts/verify_publish_payload.mjs --in ./data/publish_payload.json --policy ./config/verify_publish_policy.json --tag-registry ./data/tag_registry.json --min-registry-tags 12 --require-source-evidence on --strict-anti-ai on --json

# ä»Šå¤©çƒ­ç‚¹æ¨¡å¼ï¼ˆå¼ºåˆ¶ source.date = ä»Šå¤©ï¼‰
node ./scripts/verify_publish_payload.mjs --in ./data/publish_payload.json --policy ./config/verify_publish_policy.json --tag-registry ./data/tag_registry.json --min-registry-tags 12 --require-source-evidence on --strict-anti-ai on --mode hot --json
```

3. å‘å¸ƒå‰å¿…é¡»æ‰§è¡Œå†…å®¹å®¡æ ¸è„šæœ¬ï¼ˆåˆ†å±‚è§„åˆ™ + AIï¼‰ï¼š

```bash
node ./scripts/review_publish_payload.mjs --in ./data/publish_payload.json --policy ./config/review_policy.json --taxonomy ./config/review_taxonomy.json --ai-provider auto --require-ai off --mode hot --json
```

4. åªæœ‰å½“æ ¡éªŒå’Œå®¡æ ¸ç»“æœéƒ½ `ok=true` æ‰å…è®¸è¿›å…¥å‘å¸ƒé¡µç‚¹å‡»â€œå‘å¸ƒ/æäº¤â€ã€‚
   æ ¡éªŒç­–ç•¥åœ¨ `./config/verify_publish_policy.json`ï¼Œå®¡æ ¸ç­–ç•¥åœ¨ `./config/review_policy.json`ï¼Œåˆ†å±‚é£é™©è·¯å¾„åœ¨ `./config/review_taxonomy.json`ã€‚
5. ä»»ä¸€é—¨ç¦å¤±è´¥å¿…é¡»ä¸­æ­¢æµç¨‹å¹¶æç¤ºè¡¥é½ï¼Œç¦æ­¢â€œåªä¼ æˆªå›¾ç›´æ¥å‘â€ã€‚

ç¦æ­¢é“¾æ¥ï¼ˆå¼ºåˆ¶ï¼‰ï¼š

- æ ‡é¢˜/æ­£æ–‡/æ ‡ç­¾é‡Œç¦æ­¢å‡ºç°ä»»ä½•é“¾æ¥æˆ–åŸŸåå½¢æ€ï¼ˆ`http/https`ã€`www.`ã€`xxx.com/.cn/...`ï¼‰ã€‚å¦åˆ™æœ‰å°ç¦é£é™©ã€‚
- å¦‚æœå†…å®¹ç”Ÿæˆé‡åˆ°å›°éš¾æˆ–æ ¡éªŒä¸é€šè¿‡ï¼šå®å¯ä¸­æ­¢ï¼Œä¸è¦â€œéšä¾¿å‘ä¸€æ¡â€ã€‚

å AI è¯†åˆ«ä¸çœŸå®æ ‡ç­¾ï¼ˆå¼ºåˆ¶ï¼‰ï¼š

- ä¸æ‰¿è¯ºâ€œ100% ä¸è¢«è¯†åˆ«ä¸º AIâ€ï¼›ç›®æ ‡æ˜¯æ˜¾è‘—é™ä½é£é™©ã€‚
- æ­£æ–‡å¿…é¡»æœ‰â€œä¸ªäººè§†è§’ + å…·ä½“äº‹å®ä¿¡å·ï¼ˆæ•°å­—/æ—¥æœŸ/æ¥æºæåŠï¼‰â€ï¼Œå¹¶è§„é¿æ¨¡æ¿è…”ã€‚
- å‘å¸ƒå‰å¿…é¡»é€šè¿‡ `review_publish_payload` å®¡æ ¸é—¨ç¦ï¼Œè¦æ±‚ `decision=pass`ï¼Œå¹¶è¾“å‡º `risk_path`ã€è¯æ®å’Œ `review_queue` ä¾›å¤æ ¸ã€‚
- `source.evidence_snippet` ä¸ `source.key_facts` å¿…å¡«ï¼Œä¸”èƒ½å›æº¯åˆ°æ¥æºäº‹å®ã€‚
- æ ‡ç­¾ä¸ `post.real_topics` éƒ½å¿…é¡»æ¥è‡ªçœŸå®è¯é¢˜æ±  `data/tag_registry.json`ï¼Œç¦æ­¢è‡ªé€ æ ‡ç­¾ã€‚
- ç¦æ­¢è‡ªåŠ¨æŠŠ `#æ ‡ç­¾` æ‹¼è¿›æ­£æ–‡å†’å……è¯é¢˜ã€‚
- å‘å¸ƒå‰å¿…é¡»åœ¨å°çº¢ä¹¦å‘å¸ƒé¡µæ‰‹åŠ¨é€‰æ‹©è‡³å°‘ 3 ä¸ªçœŸå®è¯é¢˜ï¼Œç„¶åç”± `agent-browser-stealth` æ‰§è¡Œæœ€ç»ˆç‚¹å‡»å‘å¸ƒã€‚

ç¤ºä¾‹ï¼šå‡†å¤‡çœŸå®æ ‡ç­¾æ± ï¼ˆå»ºè®®æ¯å¤©æ›´æ–°ï¼‰ï¼š

```bash
cat > ./data/tag_registry.json <<'JSON'
{
  "updated_at": "2026-02-24",
  "source": {
    "platform": "xiaohongshu",
    "method": "manual_from_publish_topic_picker",
    "url": "https://creator.xiaohongshu.com/creator/publish"
  },
  "tags": ["#AIçƒ­ç‚¹", "#äººå·¥æ™ºèƒ½", "#è¡Œä¸šè§‚å¯Ÿ", "#ç§‘æŠ€æ–°é—»", "#AIèµ„è®¯", "#ç§‘æŠ€è§‚å¯Ÿ"]
}
JSON
```

å‘å¸ƒæ‰§è¡Œæ–¹å¼ï¼ˆå”¯ä¸€ï¼‰ï¼š

- æœ¬ä»“åº“åªè´Ÿè´£â€œæ•°æ®å‡†å¤‡ + é—¨ç¦æ ¡éªŒ + å®¡æ ¸æ ¡éªŒâ€ï¼›ä¸å†æä¾›å‘å¸ƒè‡ªåŠ¨åŒ–è„šæœ¬ã€‚
- æµè§ˆå™¨åŠ¨ä½œå¿…é¡»ç”± `agent-browser-stealth` ä¸²è¡Œæ‰§è¡Œï¼šæ‰“å¼€å‘å¸ƒé¡µ -> ä¸Šä¼ ç´ æ -> å¡«å†™æ ‡é¢˜/æ­£æ–‡/æ ‡ç­¾ -> æ‰‹åŠ¨é€‰æ‹©çœŸå®è¯é¢˜ -> äººå·¥ç¡®è®¤é¢„è§ˆ -> ç‚¹å‡»å‘å¸ƒã€‚
- è‹¥ä»»ä¸€é—¨ç¦å¤±è´¥ï¼ˆ`verify/review` é `ok=true`ï¼‰ï¼Œå¿…é¡»åœæ­¢åœ¨â€œå‘å¸ƒå‰â€ï¼Œç¦æ­¢ç»§ç»­ç‚¹å‡»æäº¤ã€‚

å‘å¸ƒå¯é æ€§ Checklistï¼ˆç…§è¿™ä¸ªæ‰§è¡Œï¼Œé¿å…â€œçœ‹ä¼¼å‘äº†å…¶å®æ²¡å‘/å­—æ®µæ²¡è½åº“â€ï¼‰ï¼š

- æ­£æ–‡æ¢è¡Œï¼šå†™å…¥ç¼–è¾‘å™¨å‰æŠŠ `\\n` è§„èŒƒåŒ–ä¸ºçœŸå®æ¢è¡Œï¼ˆ`text.replaceAll("\\\\n", "\n")`ï¼‰ï¼Œå¡«å®Œç«‹åˆ»è¯»å›æ ¡éªŒæ­£æ–‡ `innerText` ä¸åŒ…å«å­—é¢é‡ `\\n`ã€‚
- æ ‡é¢˜/æ­£æ–‡/æ ‡ç­¾å†™å…¥åéƒ½è¦è¯»å›æ ¡éªŒï¼šæ ‡é¢˜æ˜¯å¦å­˜åœ¨ä¸” `<= 20`ï¼›æ­£æ–‡æ˜¯å¦éç©ºä¸”é•¿åº¦è¾¾æ ‡ï¼›æ ‡ç­¾æ˜¯å¦è‡³å°‘ 3 ä¸ªä¸”éƒ½ä»¥ `#` å¼€å¤´ã€å¹¶æ¥è‡ª `tag_registry`ã€‚
- è¯»å›é—¨ç¦é‡ŒæŠŠ `post.real_topics` ä¸€å¹¶æ ¡éªŒï¼ˆ>=3ï¼Œä¸”éƒ½å‘½ä¸­ `tag_registry`ï¼‰ï¼Œé¿å…â€œå‡è¯é¢˜â€ã€‚
- æ­£æ–‡ç¼–è¾‘åŒºå¯èƒ½ä¸æ˜¯æ™®é€š input/textareaï¼›å¿…é¡»å…ˆ `snapshot -i` ç¡®è®¤å¯ç¼–è¾‘åŒºåŸŸï¼Œå†å†™å…¥å¹¶è¯»å›æ ¡éªŒã€‚
- å‘å¸ƒæŒ‰é’®ï¼šé¡µé¢å¯èƒ½æœ‰å¤šä¸ªâ€œå‘å¸ƒâ€å…¥å£ï¼Œå¿…é¡»ç‚¹å‡»â€œå¯è§ + enabled + æ–‡æ¡ˆä¸¥æ ¼åŒ¹é…â€çš„ä¸»æŒ‰é’®ï¼›ç‚¹å‡»åç”¨ URL/é¡µé¢çŠ¶æ€ç¡®è®¤å·²è·³è½¬åˆ°æˆåŠŸ/ç®¡ç†é¡µã€‚
- å›¾ç‰‡é‡ä¼ ï¼šè‹¥éœ€è¦æ›¿æ¢ï¼Œå…ˆç‚¹â€œæ¸…ç©ºâ€å¹¶åœ¨å¼¹çª—é€‰æ‹©â€œé‡æ–°ä¸Šä¼ â€ï¼›ä¸Šä¼ åç­‰å¾…ç¼©ç•¥å›¾æ•°é‡ç¨³å®šå†ç»§ç»­ã€‚
- å›¾ç‰‡å°ºå¯¸ï¼šæˆªå›¾ç±» `1280x720` ä¼šè®©é¢„è§ˆå¾ˆå·®ï¼›å‘å¸ƒå‰ç”¨é—¨ç¦æ ¡éªŒå›¾ç‰‡ä¸ºç«–ç‰ˆ 3:4ï¼ˆæ¨è `1242x1660`ï¼‰ã€‚
- ä¸²è¡Œï¼šåŒä¸€ `agent-browser-stealth` session ä¸¥æ ¼ä¸²è¡Œï¼Œå¿…è¦æ—¶ `sleep/wait`ï¼Œé¿å… `os error 35` å‡å¤±è´¥ã€‚

å‘å¸ƒæˆåŠŸé—­ç¯ï¼ˆå¼ºåˆ¶ï¼‰ï¼š

1. å‘å¸ƒ/æ›´æ–°åå›åˆ°ã€Œç¬”è®°ç®¡ç†ã€åˆ—è¡¨é¡µï¼Œç¡®è®¤ç¼©ç•¥å›¾/æ ‡é¢˜å·²å˜åŒ–ã€‚
2. é‡æ–°æ‰“å¼€è¯¥ç¬”è®°çš„ç¼–è¾‘é¡µï¼Œè¯»å›æ ¡éªŒï¼š`title/body/imgCount/tags` éƒ½å­˜åœ¨ä¸”ç¬¦åˆé—¨ç¦ï¼ˆå¦åˆ™åˆ¤å¤±è´¥é‡è¯•ï¼‰ã€‚

ç´ æå‡†å¤‡ï¼ˆå¯é€‰ï¼Œçœå»ç”¨æˆ·è‡ªå·±æ‰¾å›¾æ ‡/é…å›¾ï¼‰ï¼š

1. ç”¨æˆ·åªç»™â€œéœ€æ±‚æè¿°â€ï¼Œä¾‹å¦‚ï¼š
- â€œä¸€ä¸ªçº¢è‰²çˆ±å¿ƒçº¿æ€§ iconï¼Œé€æ˜èƒŒæ™¯â€
- â€œé€‚åˆç¾å¦†ç¬”è®°çš„æµ…è‰²ç³»è´´çº¸é£å°å›¾æ ‡â€
2. ç”¨ `agent-browser-stealth` æœç´¢å¹¶æŒ‘é€‰ 3-5 ä¸ªå€™é€‰ï¼ˆä¼˜å…ˆå…ç‰ˆæƒ/å¯å¤ç”¨æ¥æºï¼‰ã€‚
2.1 é…å›¾â€œå†…å®¹ä¸€è‡´æ€§â€é—¨ç¦ï¼ˆå¼ºçƒˆå»ºè®®ï¼‰ï¼š

- æˆªå›¾å…¥åº“å‰ï¼Œå…ˆç”¨ `agent-browser-stealth get title`/è¯» `h1` æ£€æŸ¥é¡µé¢å†…å®¹ç¡®å®åŒ…å«ç›®æ ‡å…³é”®è¯ï¼ˆå¦åˆ™å¯èƒ½æ˜¯è¯¯ç‚¹/é”™é¡µï¼‰ã€‚
- éœ€è¦æ›´å¼ºä¸€è‡´æ€§æ—¶å†ä¸Š OCRï¼ˆå¯é€‰ï¼‰ï¼Œä½†é»˜è®¤å…ˆåš `title/h1` çš„ä½æˆæœ¬æ ¡éªŒã€‚
3. ç”¨ `agent-browser-stealth` ç›´æ¥æˆªå›¾ä¿å­˜åˆ°ï¼š
- `data/assets/<YYYY-MM-DD>/icons/<name>.png`
- æŠŠæ¥æº URL è¿½åŠ åˆ°ï¼š`data/assets/<YYYY-MM-DD>/sources.txt`
4. è¿›å…¥å‘å¸ƒé¡µåæŒ‰å¸¸è§„ä¸Šä¼ åª’ä½“ï¼Œå¹¶åœ¨ç‚¹å‡»â€œå‘å¸ƒ/æäº¤â€å‰è®¾ç½®äººå·¥ç¡®è®¤ç‚¹ï¼ˆé¢„è§ˆæ— è¯¯å†å‘ï¼‰ã€‚

æµç¨‹ï¼ˆæµè§ˆå™¨ä¾§å…¨éƒ¨ç”± `agent-browser-stealth` å®Œæˆï¼‰ï¼š

1. ç¡®ä¿å·²ç™»å½•ï¼ˆå…ˆå®Œæˆä¸Šé¢çš„ Aï¼Œæˆ–å·²æœ‰æœ‰æ•ˆç™»å½•æ€ï¼‰ã€‚
2. å‡†å¤‡å¹¶æ ¡éªŒ `data/publish_payload.json`ï¼ˆå¿…é¡» `ok=true`ï¼‰ã€‚
3. æ‰“å¼€å‘å¸ƒé¡µé¢ï¼ˆå…è®¸è·¯å¾„å˜åŒ–ï¼‰ã€‚
4. ä¸Šä¼ åª’ä½“ï¼ˆå›¾æ–‡å¤šå›¾/è§†é¢‘æ–‡ä»¶ä¸å°é¢ï¼‰ã€‚
5. å¡«å†™æ ‡é¢˜/æ­£æ–‡/è¯é¢˜/æ ‡ç­¾ï¼š
- æ ‡é¢˜å¿…é¡» `8~20` å­—ï¼ˆè¶…è¿‡ 20 å­—å…ˆè£å‰ªæˆ–æç¤ºç”¨æˆ·æ”¹çŸ­ï¼‰
- æ­£æ–‡å¿…é¡» `>= 80` å­—
- æ ‡ç­¾è‡³å°‘ 3 ä¸ªï¼Œä¸”éƒ½ä»¥ `#` å¼€å¤´
- `post.real_topics` è‡³å°‘ 3 ä¸ªï¼Œä¸”ä¸æ ‡ç­¾éƒ½å¿…é¡»å‘½ä¸­ `data/tag_registry.json`ï¼ˆçœŸå®è¯é¢˜æ± ï¼‰
- ç¦æ­¢â€œä»…æˆªå›¾ç´ æâ€ç›´æ¥å‘å¸ƒï¼ˆå¦‚åªå« `screenshot/login_qr` ç­‰æˆªå›¾æ–‡ä»¶ï¼‰
- æ­£æ–‡ç¼–è¾‘åŒºä¸è¦æŒ‰æ™®é€š input å‡è®¾ï¼Œå…ˆ `snapshot -i` å†å®šä½å¯ç¼–è¾‘åŒº
- æ¯æ¬¡ç‚¹å‡»/å¡«å†™å‰å…ˆåˆ·æ–° refï¼Œé¿å… ref æ¼‚ç§»è¯¯æ“ä½œ
6. ç‚¹å‡»â€œå‘å¸ƒ/æäº¤â€å‰æš‚åœï¼Œè¦æ±‚ç”¨æˆ·ç¡®è®¤æœ€ç»ˆé¢„è§ˆã€‚
6.1 å‘å¸ƒå‰æ‰‹åŠ¨é€‰æ‹©è‡³å°‘ 3 ä¸ªçœŸå®è¯é¢˜ï¼Œå†ç”± `agent-browser-stealth` ç‚¹å‡»æäº¤ã€‚
7. å‘å¸ƒåè®°å½•ç»“æœé¡µ URLï¼›å¤±è´¥æ—¶æˆªå›¾å¹¶è®°å½•é”™è¯¯æ–‡æ¡ˆã€‚

å‘å¸ƒç»“æœè¾“å‡ºå¥‘çº¦ï¼ˆJSONï¼‰ï¼š

```json
{
  "task": "xhs_publish",
  "ok": true,
  "result_url": "https://creator.xiaohongshu.com/....",
  "content_checks": {
    "title_len": 18,
    "body_len": 136,
    "tag_count": 3,
    "topic": "ä»Šæ—¥çƒ­ç‚¹ï¼šxxxx",
    "source_date": "2026-02-12"
  },
  "artifacts": {
    "payload_json": "data/publish_payload.json",
    "media_inputs": ["..."],
    "error_screenshot": null
  }
}
```

å‘å¸ƒå¤±è´¥æ—¶ `ok=false`ï¼Œå¹¶è¿”å› `error_message`ã€`error_screenshot` è·¯å¾„å’Œæœªé€šè¿‡çš„ `missing_checks`ã€‚

## C. å¯¼å‡ºåˆ›ä½œè€…ä¸­å¿ƒæ•°æ®ï¼ˆCSV/XLSX æˆ–æˆªå›¾ï¼‰

ç›®æ ‡ï¼šæŠŠåˆ›ä½œè€…ä¸­å¿ƒå…³é”®æ•°æ®å¯¼å‡ºåˆ° `data/exports/<YYYY-MM-DD>/`ï¼Œç”¨äºåç»­åˆ†æã€‚

1. ç¡®è®¤å·²ç™»å½•ã€‚
2. ç”¨ `agent-browser-stealth` è¿›å…¥åˆ›ä½œè€…ä¸­å¿ƒçš„å¸¸ç”¨åˆ†æé¡µï¼ˆä»ªè¡¨ç›˜/å†…å®¹åˆ†æ/ç²‰ä¸åˆ†æï¼‰ã€‚
3. æ¯ä¸ªé¡µé¢ï¼š
- ä¼˜å…ˆä½¿ç”¨é¡µé¢è‡ªå¸¦å¯¼å‡ºï¼ˆå¦‚æœ‰ï¼‰åˆ° `data/exports/<date>/`
- æ— å¯¼å‡ºæ—¶ï¼šä¿å­˜å…³é”®åŒºå—æˆªå›¾åˆ°åŒç›®å½•
4. è®°å½•ï¼šå¯¼å‡ºæ—¶é—´èŒƒå›´ã€å£å¾„è¯´æ˜ã€é¡µé¢ URLã€‚

## æœ¬åœ° CLIï¼ˆæœ¬æŠ€èƒ½è‡ªå¸¦ï¼‰

å‘½ä»¤ï¼š

- `node ./bin/xhs-skill.mjs qr show --in <pngPath>`
- `node ./bin/xhs-skill.mjs cookies normalize --in <jsonPath> --out <outPath>`
- `node ./bin/xhs-skill.mjs cookies status --in <cookiesJsonPath>`
- `node ./bin/xhs-skill.mjs cookies to-header --in <cookiesJsonPath>`
- `node ./scripts/verify_publish_payload.mjs --in <payloadJsonPath> --policy ./config/verify_publish_policy.json --tag-registry ./data/tag_registry.json --min-registry-tags 12 --require-source-evidence on --strict-anti-ai on [--mode hot]`
- `node ./scripts/review_publish_payload.mjs --in <payloadJsonPath> --policy ./config/review_policy.json --taxonomy ./config/review_taxonomy.json --ai-provider auto --require-ai off [--mode hot]`

## D. è½»é‡å‘ç‰ˆæµç¨‹ï¼ˆç»´æŠ¤è€…ï¼‰

1. å…ˆè·‘æœ¬åœ°é—¨ç¦ï¼š
- `npm run check:constraints`
- `npm test`
2. æŸ¥çœ‹æ”¹åŠ¨åªåŒ…å«é¢„æœŸæ–‡ä»¶ï¼š`git status --short`
3. ç”¨ä¸­æ–‡ Conventional Commit æäº¤ï¼ˆç¤ºä¾‹ï¼‰ï¼š
- `docs(skill): è¡¥å……å‘ç‰ˆå‰å¿«é€Ÿè‡ªæ£€æ¸…å•`
4. å‘å¸ƒåˆ° ClawHubï¼ˆpatchï¼‰ï¼š
- `clawhub sync --all --bump patch --changelog "docs: è¡¥å……å‘ç‰ˆå‰å¿«é€Ÿè‡ªæ£€æ¸…å•"`
