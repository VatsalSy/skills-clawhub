# Agent Communication Skill

ä¸€ä¸ªé€šç”¨çš„ Agent é—´æ²Ÿé€šæŠ€èƒ½ï¼ŒåŸºäº **WebSocket** å®ç°å®æ—¶åŒå‘é€šä¿¡ï¼Œè§£å†³å¤š Agent å›¢é˜Ÿåä½œä¸­çš„æ²Ÿé€šé—®é¢˜ã€‚

## æŠ€æœ¯æ¶æ„

### ğŸš€ WebSocket å®æ—¶é€šä¿¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            WebSocket æ¶ˆæ¯ä»£ç†æ¶æ„                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚   Agent A  â—„â”€â”€â”€â”€â–º  WebSocket  â—„â”€â”€â”€â”€â–º  Agent B      â”‚
â”‚                     Server                          â”‚
â”‚   Agent C  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Agent D       â”‚
â”‚                                                     â”‚
â”‚   âœ… å®æ—¶åŒå‘é€šä¿¡                                    â”‚
â”‚   âœ… æ— éœ€è½®è¯¢                                        â”‚
â”‚   âœ… å»¶è¿Ÿ <50ms                                      â”‚
â”‚   âœ… ç¦»çº¿æ¶ˆæ¯é˜Ÿåˆ—                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½

- ğŸš€ **WebSocket å®æ—¶é€šä¿¡** - é«˜æ€§èƒ½åŒå‘é€šä¿¡
- ğŸ“¨ **æ¶ˆæ¯ä¼ é€’** - Agent ä¹‹é—´å¿«é€Ÿå‘é€æ¶ˆæ¯
- ğŸ“¢ **å¹¿æ’­æ¶ˆæ¯** - ä¸€æ¬¡å‘é€ç»™å¤šä¸ª Agent
- ğŸ—‚ï¸ **å…±äº«å·¥ä½œç©ºé—´** - æ–‡ä»¶é©±åŠ¨çš„åä½œ
- ğŸŸ¢ **çŠ¶æ€åŒæ­¥** - Agent åœ¨çº¿çŠ¶æ€æ£€æµ‹
- ğŸ’¾ **ç¦»çº¿æ¶ˆæ¯** - ç¦»çº¿ Agent è‡ªåŠ¨æ’é˜Ÿ

## å®‰è£…

```bash
# å®‰è£…ä¾èµ–
pip install websockets

# é€šè¿‡ ClawHub å®‰è£…
openclaw skill install agent-communication
```

## ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æ¶ˆæ¯ä»£ç†ï¼ˆWebSocket æœåŠ¡å™¨ï¼‰

```bash
python3 scripts/broker.py
```

### 2. å‘é€æ¶ˆæ¯

```bash
# WebSocket æ¨¡å¼ï¼ˆä¼˜å…ˆï¼‰
python3 scripts/send.py --from pm --to dev --message "å¼€å§‹å¼€å‘"

# æ–‡ä»¶æ¨¡å¼ï¼ˆå›é€€ï¼‰
python3 scripts/send.py --from pm --to dev --message "å¼€å§‹å¼€å‘" --file
```

### 3. Agent å®¢æˆ·ç«¯è¿æ¥

```python
import asyncio
from websocket_client import AgentClient

async def main():
    client = AgentClient("pm", "ws://localhost:8765")
    
    # è¿æ¥å¹¶ç›‘å¬
    async def handle_message(msg):
        print(f"æ”¶åˆ°æ¶ˆæ¯: {msg}")
    
    await client.run(handle_message)

asyncio.run(main())
```

## æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ–‡ä»¶æ–¹æ¡ˆ | WebSocket æ–¹æ¡ˆ |
|------|---------|---------------|
| å»¶è¿Ÿ | 500ms | <50ms |
| å®æ—¶æ€§ | è½®è¯¢ | å³æ—¶ |
| CPU å ç”¨ | ä¸­ | ä½ |
| ç¦»çº¿æ”¯æŒ | âœ… | âœ… |

## æ–‡ä»¶ç»“æ„

```
agent-communication/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ broker.py           # WebSocket æ¶ˆæ¯ä»£ç†
â”‚   â”œâ”€â”€ websocket_client.py # Agent å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ send.py             # å‘é€æ¶ˆæ¯ï¼ˆæ™ºèƒ½é€‰æ‹©ï¼‰
â”‚   â”œâ”€â”€ broadcast.py        # å¹¿æ’­æ¶ˆæ¯
â”‚   â”œâ”€â”€ status.py           # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ workspace.py        # å…±äº«å·¥ä½œç©ºé—´
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ messages/           # æ¶ˆæ¯å­˜å‚¨
â”‚   â”œâ”€â”€ status/             # Agent çŠ¶æ€
â”‚   â””â”€â”€ workspace/          # å…±äº«æ•°æ®
â””â”€â”€ templates/
    â””â”€â”€ config.json         # é…ç½®æ–‡ä»¶
```

## è§£å†³çš„é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| sessions_send è¶…æ—¶ | WebSocket å®æ—¶é€šä¿¡ |
| Agent æ— æ³•ç›´æ¥æ²Ÿé€š | æ¶ˆæ¯ä»£ç†è½¬å‘ |
| å›¢é˜Ÿåä½œæ•ˆç‡ä½ | å³æ—¶æ¶ˆæ¯ä¼ é€’ |

## ç‰ˆæœ¬

- **ç‰ˆæœ¬**: 2.0.0
- **æ›´æ–°**: WebSocket å®æ—¶é€šä¿¡
- **ä½œè€…**: momoflowers_bot